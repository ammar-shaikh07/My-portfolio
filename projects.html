<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Projects ‚Äî Shaikh Mohammad Ammar</title>

  <style>
    :root {
      --bg: #ffffff;
      --card: #f5f5f5;
      --text: #111;
      --border: #ddd;
    }

    body.dark {
      --bg: #0f0f0f;
      --card: #1b1b1b;
      --text: #f5f5f5;
      --border: #333;
    }

    body {
      background: var(--bg);
      color: var(--text);
      margin: 0;
      font-family: Arial, sans-serif;
      transition: 0.4s;
    }

    header.nav {
      background: var(--card);
      padding: 15px;
      display: flex;
      justify-content: center;
      gap: 20px;
      border-bottom: 1px solid var(--border);
    }

    header.nav a {
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
    }

    .theme-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      padding: 6px 12px;
      background: var(--text);
      color: var(--bg);
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .page {
      max-width: 1000px;
      margin: auto;
      padding: 25px;
    }

    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filters button,
    .filters select,
    .filters input {
      padding: 8px 14px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      font-size: 14px;
    }

    .projects {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .card {
      background: var(--card);
      padding: 18px;
      border-radius: 12px;
      border: 1px solid var(--border);
      transition: 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .meta {
      font-size: 13px;
      color: gray;
    }

    .badges {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin: 8px 0;
    }

    .badge {
      background: #007bff22;
      padding: 4px 8px;
      font-size: 11px;
      border-radius: 6px;
      border: 1px solid #007bff44;
    }

    .thumb {
      margin-top: 8px;
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border);
      cursor: pointer;
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 999;
    }

    .modal img {
      max-width: 90%;
      max-height: 80%;
      border-radius: 10px;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 5px 12px;
      font-weight: bold;
      background: white;
      color: black;
      border-radius: 6px;
      cursor: pointer;
    }

    .slide-btn {
      position: absolute;
      top: 50%;
      color: white;
      font-size: 40px;
      cursor: pointer;
      user-select: none;
      padding: 12px;
    }

    .left { left: 40px; }
    .right { right: 40px; }
  </style>
</head>

<body>

<header class="nav">
  <a href="index.html">Home</a>
  <a href="skills.html">Skills</a>
  <a href="projects.html">Projects</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
</header>

<div class="theme-toggle" onclick="toggleTheme()">üåô</div>

<main class="page">
  <h2>Projects</h2>

  <div class="filters">
    <button onclick="filterCategory('all')">All</button>
    <button onclick="filterCategory('web')">Websites</button>
    <button onclick="filterCategory('game')">Games</button>

    <input type="text" id="searchBox" placeholder="Search..." onkeyup="searchProjects()">

    <select id="sortBox" onchange="sortProjects()">
      <option value="latest">Latest</option>
      <option value="oldest">Oldest</option>
      <option value="stars">Stars</option>
      <option value="alpha">A ‚Üí Z</option>
    </select>
  </div>

  <div id="projects" class="projects"></div>
</main>

<footer class="footer">¬© 2025 Shaikh Mohammad Ammar</footer>

<!-- MODAL -->
<div id="imgModal" class="modal">
  <span class="modal-close" onclick="closeModal()">X</span>
  <span class="slide-btn left" onclick="prevImage()">‚ùÆ</span>
  <img id="modalImage">
  <span class="slide-btn right" onclick="nextImage()">‚ùØ</span>
</div>

<script>
/* DARK MODE */
function toggleTheme(){
  document.body.classList.toggle("dark");
}

/* MODAL SLIDER */
let sliderImages = [];
let slideIndex = 0;

function openModal(arr){
  sliderImages = arr;
  slideIndex = 0;
  document.getElementById("imgModal").style.display = "flex";
  document.getElementById("modalImage").src = arr[0];
}

function closeModal(){
  document.getElementById("imgModal").style.display = "none";
}

function nextImage(){
  slideIndex = (slideIndex+1) % sliderImages.length;
  document.getElementById("modalImage").src = sliderImages[slideIndex];
}

function prevImage(){
  slideIndex = (slideIndex-1+sliderImages.length)%sliderImages.length;
  document.getElementById("modalImage").src = sliderImages[slideIndex];
}

/* --- GITHUB PROJECT LOADER --- */

let allProjects = [];

function renderProjects(list){
  let box = document.getElementById("projects");
  box.innerHTML = "";

  list.forEach(repo => {
    let imgHTML = repo.images.length
      ? `<img src="${repo.images[0]}" class="thumb" onclick='openModal(${JSON.stringify(repo.images)})'>`
      : "";

    let topicsHTML = repo.topics.map(t => `<span class="badge">${t}</span>`).join("");

    box.innerHTML += `
      <article class="card">
        <h3>${repo.name}</h3>
        <p>${repo.description || "No description"}</p>

        <div class="meta">Updated: ${new Date(repo.updated_at).toDateString()}</div>
        <div class="meta">‚≠ê ${repo.stars} | üç¥ ${repo.forks}</div>

        <div class="badges">${topicsHTML}</div>

        ${imgHTML}

        <a href="${repo.html_url}" target="_blank">View Code ‚Üí</a><br>
        ${repo.live ? `<a href="${repo.live}" target="_blank">Live ‚Üí</a>` : ""}
        ${repo.apk ? `<a href="${repo.apk}" download>Download APK ‚Üí</a>` : ""}
      </article>
    `;
  });
}

async function loadProjects() {
  let res = await fetch("https://api.github.com/users/ammar-shaikh07/repos");
  let repos = await res.json();

  for (let r of repos) {

    if (r.fork) continue;
    if (r.name.toLowerCase().includes("portfolio")) continue;

    let images = [];
    for (let i = 1; i <= 10; i++) {
      let url = `https://raw.githubusercontent.com/ammar-shaikh07/${r.name}/main/images/${i}.png`;
      let img = await fetch(url);
      if (img.ok) images.push(url);
    }

    let apk = "";
    try {
      let rel = await fetch(`https://api.github.com/repos/ammar-shaikh07/${r.name}/releases`);
      let data = await rel.json();
      if (data.length > 0) {
        let found = data[0].assets.find(a => a.name.endsWith(".apk"));
        if (found) apk = found.browser_download_url;
      }
    } catch {}

    allProjects.push({
      name: r.name,
      description: r.description,
      updated_at: r.updated_at,
      stars: r.stargazers_count,
      forks: r.forks_count,
      topics: r.topics,
      html_url: r.html_url,
      live: r.has_pages ? `https://ammar-shaikh07.github.io/${r.name}/` : "",
      apk: apk,
      images: images,
    });
  }

  renderProjects(allProjects);
}

loadProjects();

/* FILTERS */
function filterCategory(type){
  if(type === "all") return renderProjects(allProjects);

  let filtered = allProjects.filter(p =>
    type === "web"
      ? p.live !== ""
      : p.apk !== ""
  );

  renderProjects(filtered);
}

/* SEARCH */
function searchProjects(){
  let q = document.getElementById("searchBox").value.toLowerCase();

  let s = allProjects.filter(p =>
    p.name.toLowerCase().includes(q) ||
    p.description?.toLowerCase().includes(q)
  );

  renderProjects(s);
}

/* SORT */
function sortProjects(){
  let val = document.getElementById("sortBox").value;

  let sorted = [...allProjects];

  if(val === "latest")
    sorted.sort((a,b) => new Date(b.updated_at) - new Date(a.updated_at));

  if(val === "oldest")
    sorted.sort((a,b) => new Date(a.updated_at) - new Date(b.updated_at));

  if(val === "stars")
    sorted.sort((a,b) => b.stars - a.stars);

  if(val === "alpha")
    sorted.sort((a,b) => a.name.localeCompare(b.name));

  renderProjects(sorted);
}
</script>

</body>
</html>