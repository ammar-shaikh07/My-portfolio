<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <title>Projects ‚Äî Shaikh Mohammad Ammar</title>

  <style>
    :root {
  --text: #ffffff;
  --card: rgba(255,255,255,0.10);
  --border: rgba(255,255,255,0.25);
}

/* PAGE */
.page {
  max-width: 1000px;
  margin: auto;
  padding: 30px;
  color: white;
}

/* FILTER PANEL */
.filters {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.filters button,
.filters select,
.filters input {
  padding: 8px 14px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.15);
  color: white;
  font-size: 14px;
  backdrop-filter: blur(4px);
}

/* PROJECT GRID */
.projects {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
}

/* CARD */
.card {
  background: var(--card);
  padding: 18px;
  border-radius: 14px;
  border: 2px solid var(--border);
  backdrop-filter: blur(6px);
  transition: 0.3s;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

.meta {
  font-size: 13px;
  color: #e0e0e0;
}

.badges {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin: 8px 0;
}

.badge {
  background: rgba(255,255,255,0.12);
  padding: 4px 8px;
  font-size: 11px;
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,0.3);
}

/* IMAGE */
.thumb {
  margin-top: 8px;
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.3);
  cursor: pointer;
}

/* MODAL */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 999;
}

.modal img {
  max-width: 90%;
  max-height: 80%;
  border-radius: 10px;
}

.modal-close {
  position: absolute;
  top: 20px;
  right: 20px;
  padding: 5px 12px;
  font-weight: bold;
  background: white;
  color: black;
  border-radius: 6px;
  cursor: pointer;
}

.slide-btn {
  position: absolute;
  top: 50%;
  color: white;
  font-size: 40px;
  cursor: pointer;
  user-select: none;
  padding: 12px;
}

.left { left: 40px; }
.right { right: 40px; }

footer {
  text-align: center;
  padding: 20px;
  color: white;
  font-size: 15px;
  margin-top: 40px;
}

  </style>
</head>

<body>

<header class="nav">
  <a href="index.html">Home</a>
  <a href="skills.html">Skills</a>
  <a href="projects.html">Projects</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
</header>

<main class="page">
  <h2>Projects</h2>

  <div class="filters">
    <button onclick="filterCategory('all')">All</button>
    <button onclick="filterCategory('web')">Websites</button>
    <button onclick="filterCategory('game')">Games</button>

    <input type="text" id="searchBox" placeholder="Search..." onkeyup="searchProjects()">

    <select id="sortBox" onchange="sortProjects()">
      <option value="latest">Latest</option>
      <option value="oldest">Oldest</option>
      <option value="stars">Stars</option>
      <option value="alpha">A ‚Üí Z</option>
    </select>
  </div>

  <div id="projects" class="projects"></div>
</main>

<footer>¬© 2025 Shaikh Mohammad Ammar</footer>

<!-- MODAL -->
<div id="imgModal" class="modal">
  <span class="modal-close" onclick="closeModal()">X</span>
  <span class="slide-btn left" onclick="prevImage()">‚ùÆ</span>
  <img id="modalImage">
  <span class="slide-btn right" onclick="nextImage()">‚ùØ</span>
</div>

<script>
/* MODAL */
let sliderImages = [];
let slideIndex = 0;

function openModal(arr){
  sliderImages = arr;
  slideIndex = 0;
  document.getElementById("imgModal").style.display = "flex";
  document.getElementById("modalImage").src = arr[0];
}

function closeModal(){
  document.getElementById("imgModal").style.display = "none";
}

function nextImage(){
  slideIndex = (slideIndex+1) % sliderImages.length;
  document.getElementById("modalImage").src = sliderImages[slideIndex];
}

function prevImage(){
  slideIndex = (slideIndex-1+sliderImages.length)%sliderImages.length;
  document.getElementById("modalImage").src = sliderImages[slideIndex];
}

/* GITHUB LOADER */
let allProjects = [];

function renderProjects(list){
  let box = document.getElementById("projects");
  box.innerHTML = "";

  list.forEach(repo => {
    let imgHTML = repo.images.length
      ? `<img src="${repo.images[0]}" class="thumb" onclick='openModal(${JSON.stringify(repo.images)})'>`
      : "";

    let topicsHTML = repo.topics.map(t => `<span class="badge">${t}</span>`).join("");

    box.innerHTML += `
      <article class="card">
        <h3>${repo.name}</h3>
        <p>${repo.description || "No description"}</p>

        <div class="meta">Updated: ${new Date(repo.updated_at).toDateString()}</div>
        <div class="meta">‚≠ê ${repo.stars} | üç¥ ${repo.forks}</div>

        <div class="badges">${topicsHTML}</div>

        ${imgHTML}

        <a href="${repo.html_url}" target="_blank">View Code ‚Üí</a><br>

        <!-- ONLY SHOW LIVE IF IT IS A WEBSITE -->
        ${repo.live && !repo.apk ? `<a href="${repo.live}" target="_blank">Live ‚Üí</a>` : ""}

        <!-- ONLY SHOW APK IF IT IS A GAME -->
        ${repo.apk ? `<a href="${repo.apk}" download>Download APK ‚Üí</a>` : ""}
      </article>
    `;
  });
}

async function loadProjects() {
  let res = await fetch("https://api.github.com/users/ammar-shaikh07/repos");
  let repos = await res.json();

  for (let r of repos) {

    if (r.fork) continue;
    if (r.name.toLowerCase().includes("portfolio")) continue;

    let images = [];
    for (let i = 1; i <= 10; i++) {
      let url = `https://raw.githubusercontent.com/ammar-shaikh07/${r.name}/main/images/${i}.png`;
      let img = await fetch(url);
      if (img.ok) images.push(url);
    }

    let apk = "";
    try {
      let rel = await fetch(`https://api.github.com/repos/ammar-shaikh07/${r.name}/releases`);
      let data = await rel.json();
      if (data.length > 0) {
        let found = data[0].assets.find(a => a.name.endsWith(".apk"));
        if (found) apk = found.browser_download_url;
      }
    } catch {}

    allProjects.push({
      name: r.name,
      description: r.description,
      updated_at: r.updated_at,
      stars: r.stargazers_count,
      forks: r.forks_count,
      topics: r.topics,
      html_url: r.html_url,
      live: r.has_pages ? `https://ammar-shaikh07.github.io/${r.name}/` : "",
      apk: apk,
      images: images,
    });
  }

  renderProjects(allProjects);
}

loadProjects();

/* FILTERS */
function filterCategory(type){
  if(type === "all")
    return renderProjects(allProjects);

  let filtered =
    type === "web"
      ? allProjects.filter(p => p.live !== "" && !p.apk)
      : allProjects.filter(p => p.apk !== "");

  renderProjects(filtered);
}

/* SEARCH */
function searchProjects(){
  let q = document.getElementById("searchBox").value.toLowerCase();

  let s = allProjects.filter(p =>
    p.name.toLowerCase().includes(q) ||
    p.description?.toLowerCase().includes(q)
  );

  renderProjects(s);
}

/* SORTING */
function sortProjects(){
  let val = document.getElementById("sortBox").value;

  let sorted = [...allProjects];

  if(val === "latest")
    sorted.sort((a,b) => new Date(b.updated_at) - new Date(a.updated_at));

  if(val === "oldest")
    sorted.sort((a,b) => new Date(a.updated_at) - new Date(b.updated_at));

  if(val === "stars")
    sorted.sort((a,b) => b.stars - a.stars);

  if(val === "alpha")
    sorted.sort((a,b) => a.name.localeCompare(b.name));

  renderProjects(sorted);
}
</script>

</body>
</html>
